(function(n){"use strict";var t={init:function(i){var r=this;if(!r.data("jqv")||r.data("jqv")==null){i=t._saveOptions(r,i);n(document).on("click",".formError",function(){n(this).fadeOut(150,function(){n(this).closest(".formError").remove()})})}return this},attach:function(i){var r=this,u;if(u=i?t._saveOptions(r,i):r.data("jqv"),u.validateAttribute=r.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class",u.binded){r.on(u.validationEventTrigger,"["+u.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",t._onFieldEvent);r.on("click","["+u.validateAttribute+"*=validate][type=checkbox],["+u.validateAttribute+"*=validate][type=radio]",t._onFieldEvent);r.on(u.validationEventTrigger,"["+u.validateAttribute+"*=validate][class*=datepicker]",{delay:300},t._onFieldEvent)}u.autoPositionUpdate&&n(window).bind("resize",{noAnimation:!0,formElem:r},t.updatePromptsPosition);r.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",t._submitButtonClick);r.removeData("jqv_submitButton");r.on("submit",t._onSubmitEvent);return this},detach:function(){var i=this,r=i.data("jqv");return i.off(r.validationEventTrigger,"["+r.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",t._onFieldEvent),i.off("click","["+r.validateAttribute+"*=validate][type=checkbox],["+r.validateAttribute+"*=validate][type=radio]",t._onFieldEvent),i.off(r.validationEventTrigger,"["+r.validateAttribute+"*=validate][class*=datepicker]",t._onFieldEvent),i.off("submit",t._onSubmitEvent),i.removeData("jqv"),i.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",t._submitButtonClick),i.removeData("jqv_submitButton"),r.autoPositionUpdate&&n(window).off("resize",t.updatePromptsPosition),this},validate:function(i){var u=n(this),f=null,r,e;if(u.is("form")||u.hasClass("validationEngineContainer")){if(u.hasClass("validating"))return!1;u.addClass("validating");r=i?t._saveOptions(u,i):u.data("jqv");f=t._validateFields(this);setTimeout(function(){u.removeClass("validating")},100);f&&r.onSuccess?r.onSuccess():!f&&r.onFailure&&r.onFailure()}else if(u.is("form")||u.hasClass("validationEngineContainer"))u.removeClass("validating");else return e=u.closest("form, .validationEngineContainer"),r=e.data("jqv")?e.data("jqv"):n.validationEngine.defaults,f=t._validateField(u,r),f&&r.onFieldSuccess?r.onFieldSuccess():r.onFieldFailure&&r.InvalidFields.length>0&&r.onFieldFailure(),!f;return r.onValidationComplete?!!r.onValidationComplete(e,f):f},updatePromptsPosition:function(i){var f,u,r;return i&&this==window?(u=i.data.formElem,f=i.data.noAnimation):u=n(this.closest("form, .validationEngineContainer")),r=u.data("jqv"),r||(r=t._saveOptions(u,r)),u.find("["+r.validateAttribute+"*=validate]").not(":disabled").each(function(){var i=n(this),e,o;r.prettySelect&&i.is(":hidden")&&(i=u.find("#"+r.usePrefix+i.attr("id")+r.useSuffix));e=t._getPrompt(i);o=n(e).find(".formErrorContent").html();e&&t._updatePrompt(i,n(e),o,undefined,!1,r,f)}),this},showPrompt:function(n,i,r,u){var e=this.closest("form, .validationEngineContainer"),f=e.data("jqv");return f||(f=t._saveOptions(this,f)),r&&(f.promptPosition=r),f.showArrow=u==!0,t._showPrompt(this,n,i,!1,f),this},hide:function(){var i=n(this).closest("form, .validationEngineContainer"),r=i.data("jqv"),u,f;return r||(r=t._saveOptions(i,r)),u=r&&r.fadeDuration?r.fadeDuration:.3,f=i.is("form")||i.hasClass("validationEngineContainer")?"parentForm"+t._getClassName(n(i).attr("id")):t._getClassName(n(i).attr("id"))+"formError",n("."+f).fadeTo(u,0,function(){n(this).closest(".formError").remove()}),this},hideAll:function(){var i=this,t=i.data("jqv"),r=t?t.fadeDuration:300;return n(".formError").fadeTo(r,0,function(){n(this).closest(".formError").remove()}),this},_onFieldEvent:function(i){var u=n(this),f=u.closest("form, .validationEngineContainer"),r=f.data("jqv");r||(r=t._saveOptions(f,r));r.eventTrigger="field";r.notEmpty==!0?u.val().length>0&&window.setTimeout(function(){t._validateField(u,r)},i.data?i.data.delay:0):window.setTimeout(function(){t._validateField(u,r)},i.data?i.data.delay:0)},_onSubmitEvent:function(){var i=n(this),r=i.data("jqv"),u,f;return i.data("jqv_submitButton")&&(u=n("#"+i.data("jqv_submitButton")),u&&u.length>0&&(u.hasClass("validate-skip")||u.attr("data-validation-engine-skip")=="true"))?!0:(r.eventTrigger="submit",f=t._validateFields(i),f&&r.ajaxFormValidation)?(t._validateFormWithAjax(i,r),!1):r.onValidationComplete?!!r.onValidationComplete(i,f):f},_checkAjaxStatus:function(t){var i=!0;return n.each(t.ajaxValidCache,function(n,t){if(!t)return i=!1,!1}),i},_checkAjaxFieldStatus:function(n,t){return t.ajaxValidCache[n]==!0},_validateFields:function(i){var r=i.data("jqv"),e=!1,u,h,s,c,l,a;if(i.trigger("jqv.form.validating"),u=null,i.find("["+r.validateAttribute+"*=validate]").not(":disabled").each(function(){var f=n(this),o=[];if(n.inArray(f.attr("name"),o)<0&&((e|=t._validateField(f,r),e&&u==null&&(f.is(":hidden")&&r.prettySelect?u=f=i.find("#"+r.usePrefix+t._jqSelector(f.attr("id"))+r.useSuffix):(f.data("jqv-prompt-at")instanceof jQuery?f=f.data("jqv-prompt-at"):f.data("jqv-prompt-at")&&(f=n(f.data("jqv-prompt-at"))),u=f)),r.doNotShowAllErrosOnSubmit)||(o.push(f.attr("name")),r.showOneMessage==!0&&e)))return!1}),i.trigger("jqv.form.result",[e]),e){if(r.scroll){var o=u.offset().top,v=u.offset().left,f=r.promptPosition;if(typeof f=="string"&&f.indexOf(":")!=-1&&(f=f.substring(0,f.indexOf(":"))),f!="bottomRight"&&f!="bottomLeft"&&(h=t._getPrompt(u),h&&(o=h.offset().top)),r.scrollOffset&&(o-=r.scrollOffset),r.isOverflown){if(s=n(r.overflownDIV),!s.length)return!1;c=s.scrollTop();l=-parseInt(s.offset().top);o+=c+l-5;a=n(r.overflownDIV).filter(":not(:animated)");a.animate({scrollTop:o},1100,function(){r.focusFirstField&&u.focus()})}else n("html, body").animate({scrollTop:o},1100,function(){r.focusFirstField&&u.focus()}),n("html, body").animate({scrollLeft:v},1100)}else r.focusFirstField&&u.focus();return!1}return!0},_validateFormWithAjax:function(i,r){var f=i.serialize(),e=r.ajaxFormValidationMethod?r.ajaxFormValidationMethod:"GET",o=r.ajaxFormValidationURL?r.ajaxFormValidationURL:i.attr("action"),u=r.dataType?r.dataType:"json";n.ajax({type:e,url:o,cache:!1,dataType:u,data:f,form:i,methods:t,options:r,beforeSend:function(){return r.onBeforeAjaxFormValidation(i,r)},error:function(n,i){if(r.onFailure)r.onFailure(n,i);else t._ajaxError(n,i)},success:function(f){var c,s,e,o;if(u=="json"&&f!==!0){for(c=!1,s=0;s<f.length;s++){var l=f[s],a=l[0],h=n(n("#"+a)[0]);h.length==1&&(e=l[2],l[1]==!0?e!=""&&e?(r.allrules[e]&&(o=r.allrules[e].alertTextOk,o&&(e=o)),r.showPrompts&&t._showPrompt(h,e,"pass",!1,r,!0)):t._closePrompt(h):(c|=!0,r.allrules[e]&&(o=r.allrules[e].alertText,o&&(e=o)),r.showPrompts&&t._showPrompt(h,e,"",!1,r,!0)))}r.onAjaxFormComplete(!c,i,f,r)}else r.onAjaxFormComplete(!0,i,f,r)}})},_validateField:function(i,r,u){var g,p,s,f,v,w,o,b,l,y,k,ut,d;if((i.attr("id")||(i.attr("id","form-validation-field-"+n.validationEngine.fieldIdCounter),++n.validationEngine.fieldIdCounter),i.hasClass(r.ignoreFieldsWithClass))||!r.validateNonVisibleFields&&(i.is(":hidden")&&!r.prettySelect||i.parent().is(":hidden"))||(g=i.attr(r.validateAttribute),p=/validate\[(.*)\]/.exec(g),!p))return!1;var nt=p[1],e=nt.split(/\[|,|\]/),tt=!1,a=i.attr("name"),c="",it="",h=!1,rt=!1;for(r.isError=!1,r.showArrow=r.showArrow==!0,r.maxErrorsPerField>0&&(rt=!0),s=n(i.closest("form, .validationEngineContainer")),f=0;f<e.length;f++)e[f]=e[f].toString().replace(" ",""),e[f]===""&&delete e[f];for(f=0,v=0;f<e.length;f++){if(rt&&v>=r.maxErrorsPerField){h||(w=n.inArray("required",e),h=w!=-1&&w>=f);break}o=undefined;switch(e[f]){case"required":h=!0;o=t._getErrorMessage(s,i,e[f],e,f,r,t._required);break;case"custom":o=t._getErrorMessage(s,i,e[f],e,f,r,t._custom);break;case"groupRequired":l="["+r.validateAttribute+"*="+e[f+1]+"]";b=s.find(l).eq(0);b[0]!=i[0]&&(t._validateField(b,r,u),r.showArrow=!0);o=t._getErrorMessage(s,i,e[f],e,f,r,t._groupRequired);o&&(h=!0);r.showArrow=!1;break;case"ajax":o=t._ajax(i,e,f,r);o&&(it="load");break;case"minSize":o=t._getErrorMessage(s,i,e[f],e,f,r,t._minSize);break;case"maxSize":o=t._getErrorMessage(s,i,e[f],e,f,r,t._maxSize);break;case"min":o=t._getErrorMessage(s,i,e[f],e,f,r,t._min);break;case"max":o=t._getErrorMessage(s,i,e[f],e,f,r,t._max);break;case"past":o=t._getErrorMessage(s,i,e[f],e,f,r,t._past);break;case"future":o=t._getErrorMessage(s,i,e[f],e,f,r,t._future);break;case"dateRange":l="["+r.validateAttribute+"*="+e[f+1]+"]";r.firstOfGroup=s.find(l).eq(0);r.secondOfGroup=s.find(l).eq(1);(r.firstOfGroup[0].value||r.secondOfGroup[0].value)&&(o=t._getErrorMessage(s,i,e[f],e,f,r,t._dateRange));o&&(h=!0);r.showArrow=!1;break;case"dateTimeRange":l="["+r.validateAttribute+"*="+e[f+1]+"]";r.firstOfGroup=s.find(l).eq(0);r.secondOfGroup=s.find(l).eq(1);(r.firstOfGroup[0].value||r.secondOfGroup[0].value)&&(o=t._getErrorMessage(s,i,e[f],e,f,r,t._dateTimeRange));o&&(h=!0);r.showArrow=!1;break;case"maxCheckbox":i=n(s.find("input[name='"+a+"']"));o=t._getErrorMessage(s,i,e[f],e,f,r,t._maxCheckbox);break;case"minCheckbox":i=n(s.find("input[name='"+a+"']"));o=t._getErrorMessage(s,i,e[f],e,f,r,t._minCheckbox);break;case"equals":o=t._getErrorMessage(s,i,e[f],e,f,r,t._equals);break;case"funcCall":o=t._getErrorMessage(s,i,e[f],e,f,r,t._funcCall);break;case"creditCard":o=t._getErrorMessage(s,i,e[f],e,f,r,t._creditCard);break;case"condRequired":o=t._getErrorMessage(s,i,e[f],e,f,r,t._condRequired);o!==undefined&&(h=!0);break;case"funcCallRequired":o=t._getErrorMessage(s,i,e[f],e,f,r,t._funcCallRequired);o!==undefined&&(h=!0)}if(y=!1,typeof o=="object")switch(o.status){case"_break":y=!0;break;case"_error":o=o.message;break;case"_error_no_prompt":return!0}if(f==0&&nt.indexOf("funcCallRequired")==0&&o!==undefined&&(c!=""&&(c+="<br/>"),c+=o,r.isError=!0,v++,y=!0),y)break;typeof o=="string"&&(c!=""&&(c+="<br/>"),c+=o,r.isError=!0,v++)}if(!h&&!i.val()&&i.val().length<1&&n.inArray("equals",e)<0&&(r.isError=!1),k=i.prop("type"),ut=i.data("promptPosition")||r.promptPosition,(k=="radio"||k=="checkbox")&&s.find("input[name='"+a+"']").length>1&&(i=ut==="inline"?n(s.find("input[name='"+a+"'][type!=hidden]:last")):n(s.find("input[name='"+a+"'][type!=hidden]:first")),r.showArrow=r.showArrowOnRadioAndCheckbox),i.is(":hidden")&&r.prettySelect&&(i=s.find("#"+r.usePrefix+t._jqSelector(i.attr("id"))+r.useSuffix)),r.isError&&r.showPrompts?t._showPrompt(i,c,it,!1,r):tt||t._closePrompt(i),tt||i.trigger("jqv.field.result",[i,r.isError,c]),d=n.inArray(i[0],r.InvalidFields),d==-1?r.isError&&r.InvalidFields.push(i[0]):r.isError||r.InvalidFields.splice(d,1),t._handleStatusCssClasses(i,r),r.isError&&r.onFieldFailure)r.onFieldFailure(i);if(!r.isError&&r.onFieldSuccess)r.onFieldSuccess(i);return r.isError},_handleStatusCssClasses:function(n,t){t.addSuccessCssClassToField&&n.removeClass(t.addSuccessCssClassToField);t.addFailureCssClassToField&&n.removeClass(t.addFailureCssClassToField);t.addSuccessCssClassToField&&!t.isError&&n.addClass(t.addSuccessCssClassToField);t.addFailureCssClassToField&&t.isError&&n.addClass(t.addFailureCssClassToField)},_getErrorMessage:function(i,r,u,f,e,o,s){var l=jQuery.inArray(u,f),a,c;(u==="custom"||u==="funcCall"||u==="funcCallRequired")&&(a=f[l+1],u=u+"["+a+"]",delete f[l]);var v=u,y=r.attr("data-validation-engine")?r.attr("data-validation-engine"):r.attr("class"),p=y.split(" "),h;return h=u=="future"||u=="past"||u=="maxCheckbox"||u=="minCheckbox"?s(i,r,f,e,o):s(r,f,e,o),h!=undefined&&(c=t._getCustomErrorMessage(n(r),p,v,o),c&&(h=c)),h},_getCustomErrorMessage:function(n,i,r,u){var f=!1,h=/^custom\[.*\]$/.test(r)?t._validityProp.custom:t._validityProp[r],e,o,s;if(h!=undefined&&(f=n.attr("data-errormessage-"+h),f!=undefined)||(f=n.attr("data-errormessage"),f!=undefined))return f;if(e="#"+n.attr("id"),typeof u.custom_error_messages[e]!="undefined"&&typeof u.custom_error_messages[e][r]!="undefined")f=u.custom_error_messages[e][r].message;else if(i.length>0)for(o=0;o<i.length&&i.length>0;o++)if(s="."+i[o],typeof u.custom_error_messages[s]!="undefined"&&typeof u.custom_error_messages[s][r]!="undefined"){f=u.custom_error_messages[s][r].message;break}return f||typeof u.custom_error_messages[r]=="undefined"||typeof u.custom_error_messages[r].message=="undefined"||(f=u.custom_error_messages[r].message),f},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",funcCallRequired:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(t,i,r,u,f){var e,o;switch(t.prop("type")){case"radio":case"checkbox":if(f){if(!t.prop("checked"))return u.allrules[i[r]].alertTextCheckboxMultiple;break}if(e=t.closest("form, .validationEngineContainer"),o=t.attr("name"),e.find("input[name='"+o+"']:checked").length==0)return e.find("input[name='"+o+"']:visible").length==1?u.allrules[i[r]].alertTextCheckboxe:u.allrules[i[r]].alertTextCheckboxMultiple;break;case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:var s=n.trim(t.val()),h=n.trim(t.attr("data-validation-placeholder")),c=n.trim(t.attr("placeholder"));if(!s||h&&s==h||c&&s==c)return u.allrules[i[r]].alertText}},_groupRequired:function(i,r,u,f){var o="["+f.validateAttribute+"*="+r[u+1]+"]",e=!1;return i.closest("form, .validationEngineContainer").find(o).each(function(){if(!t._required(n(this),r,u,f))return e=!0,!1}),e?void 0:f.allrules[r[u]].alertText},_custom:function(n,t,i,r){var u=t[i+1],f=r.allrules[u],e,o,s;if(!f){alert("jqv:custom rule not found - "+u);return}if(f.regex){if(o=f.regex,!o){alert("jqv:custom regex not found - "+u);return}if(s=new RegExp(o),!s.test(n.val()))return r.allrules[u].alertText}else if(f.func){if(e=f.func,typeof e!="function"){alert("jqv:custom parameter 'function' is no function - "+u);return}if(!e(n,t,i,r))return r.allrules[u].alertText}else{alert("jqv:custom type not allowed "+u);return}},_funcCall:function(n,t,i,r){var u=t[i+1],f,o,e;if(u.indexOf(".")>-1){for(o=u.split("."),e=window;o.length;)e=e[o.shift()];f=e}else f=window[u]||r.customFunctions[u];if(typeof f=="function")return f(n,t,i,r)},_funcCallRequired:function(n,i,r,u){return t._funcCall(n,i,r,u)},_equals:function(t,i,r,u){var f=i[r+1];if(t.val()!=n("#"+f).val())return u.allrules.equals.alertText},_maxSize:function(n,t,i,r){var f=t[i+1],e=n.val().length,u;if(e>f)return u=r.allrules.maxSize,u.alertText+f+u.alertText2},_minSize:function(n,t,i,r){var f=t[i+1],e=n.val().length,u;if(e<f)return u=r.allrules.minSize,u.alertText+f+u.alertText2},_min:function(n,t,i,r){var f=parseFloat(t[i+1]),e=parseFloat(n.val()),u;if(e<f)return(u=r.allrules.min,u.alertText2)?u.alertText+f+u.alertText2:u.alertText+f},_max:function(n,t,i,r){var f=parseFloat(t[i+1]),e=parseFloat(n.val()),u;if(e>f)return(u=r.allrules.max,u.alertText2)?u.alertText+f+u.alertText2:u.alertText+f},_past:function(i,r,u,f,e){var h=u[f+1],c=n(i.find("*[name='"+h.replace(/^#+/,"")+"']")),o,l,s;if(h.toLowerCase()=="now")o=new Date;else if(undefined!=c.val()){if(c.is(":disabled"))return;o=t._parseDate(c.val())}else o=t._parseDate(h);return l=t._parseDate(r.val()),l>o?(s=e.allrules.past,s.alertText2)?s.alertText+t._dateToString(o)+s.alertText2:s.alertText+t._dateToString(o):void 0},_future:function(i,r,u,f,e){var h=u[f+1],c=n(i.find("*[name='"+h.replace(/^#+/,"")+"']")),o,l,s;if(h.toLowerCase()=="now")o=new Date;else if(undefined!=c.val()){if(c.is(":disabled"))return;o=t._parseDate(c.val())}else o=t._parseDate(h);return l=t._parseDate(r.val()),l<o?(s=e.allrules.future,s.alertText2)?s.alertText+t._dateToString(o)+s.alertText2:s.alertText+t._dateToString(o):void 0},_isDate:function(n){var t=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);return t.test(n)},_isDateTime:function(n){var t=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);return t.test(n)},_dateCompare:function(n,t){return new Date(n.toString())<new Date(t.toString())},_dateRange:function(n,i,r,u){return!u.firstOfGroup[0].value&&u.secondOfGroup[0].value||u.firstOfGroup[0].value&&!u.secondOfGroup[0].value?u.allrules[i[r]].alertText+u.allrules[i[r]].alertText2:!t._isDate(u.firstOfGroup[0].value)||!t._isDate(u.secondOfGroup[0].value)?u.allrules[i[r]].alertText+u.allrules[i[r]].alertText2:t._dateCompare(u.firstOfGroup[0].value,u.secondOfGroup[0].value)?void 0:u.allrules[i[r]].alertText+u.allrules[i[r]].alertText2},_dateTimeRange:function(n,i,r,u){return!u.firstOfGroup[0].value&&u.secondOfGroup[0].value||u.firstOfGroup[0].value&&!u.secondOfGroup[0].value?u.allrules[i[r]].alertText+u.allrules[i[r]].alertText2:!t._isDateTime(u.firstOfGroup[0].value)||!t._isDateTime(u.secondOfGroup[0].value)?u.allrules[i[r]].alertText+u.allrules[i[r]].alertText2:t._dateCompare(u.firstOfGroup[0].value,u.secondOfGroup[0].value)?void 0:u.allrules[i[r]].alertText+u.allrules[i[r]].alertText2},_maxCheckbox:function(n,t,i,r,u){var f=i[r+1],e=t.attr("name"),o=n.find("input[name='"+e+"']:checked").length;if(o>f)return(u.showArrow=!1,u.allrules.maxCheckbox.alertText2)?u.allrules.maxCheckbox.alertText+" "+f+" "+u.allrules.maxCheckbox.alertText2:u.allrules.maxCheckbox.alertText},_minCheckbox:function(n,t,i,r,u){var f=i[r+1],e=t.attr("name"),o=n.find("input[name='"+e+"']:checked").length;if(o<f)return u.showArrow=!1,u.allrules.minCheckbox.alertText+" "+f+" "+u.allrules.minCheckbox.alertText2},_creditCard:function(n,t,i,r){var s=!1,u=n.val().replace(/ +/g,"").replace(/-+/g,""),f=u.length;if(f>=14&&f<=16&&parseInt(u)>0){var h=0,i=f-1,c=1,e,o=new String;do e=parseInt(u.charAt(i)),o+=c++%2==0?e*2:e;while(--i>=0);for(i=0;i<o.length;i++)h+=parseInt(o.charAt(i));s=h%10==0}if(!s)return r.allrules.creditCard.alertText},_ajax:function(i,r,u,f){var p=r[u+1],e=f.allrules[p],h=e.extraData,y=e.extraDataDynamic,c={fieldId:i.attr("id"),fieldValue:i.val()},l,o,w,a,u,s,v,b;if(typeof h=="object")n.extend(c,h);else if(typeof h=="string")for(l=h.split("&"),u=0;u<l.length;u++)o=l[u].split("="),o[0]&&o[0]&&(c[o[0]]=o[1]);if(y)for(w=[],a=String(y).split(","),u=0;u<a.length;u++)s=a[u],n(s).length&&(v=i.closest("form, .validationEngineContainer").find(s).val(),b=s.replace("#","")+"="+escape(v),c[s.replace("#","")]=v);return f.eventTrigger=="field"&&delete f.ajaxValidCache[i.attr("id")],!f.isError&&!t._checkAjaxFieldStatus(i.attr("id"),f)?(n.ajax({type:f.ajaxFormValidationMethod,url:e.url,cache:!1,dataType:"json",data:c,field:i,rule:e,methods:t,options:f,beforeSend:function(){},error:function(n,i){if(f.onFailure)f.onFailure(n,i);else t._ajaxError(n,i)},success:function(r){var h=r[0],o=n("#"+h).eq(0),c,u,s;o.length==1&&(c=r[1],u=r[2],c?(f.ajaxValidCache[h]=!0,u?f.allrules[u]&&(s=f.allrules[u].alertTextOk,s&&(u=s)):u=e.alertTextOk,f.showPrompts&&(u?t._showPrompt(o,u,"pass",!0,f):t._closePrompt(o)),f.eventTrigger=="submit"&&i.closest("form").submit()):(f.ajaxValidCache[h]=!1,f.isError=!0,u?f.allrules[u]&&(s=f.allrules[u].alertText,s&&(u=s)):u=e.alertText,f.showPrompts&&t._showPrompt(o,u,"",!0,f)));o.trigger("jqv.field.result",[o,f.isError,u])}}),e.alertTextLoad):void 0},_ajaxError:function(n,t){n.status==0&&t==null?alert("The page is not served from a server! ajax call failed"):typeof console!="undefined"&&console.log("Ajax error: "+n.status+" "+t)},_dateToString:function(n){return n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()},_parseDate:function(n){var t=n.split("-");return(t==n&&(t=n.split("/")),t==n)?(t=n.split("."),new Date(t[2],t[1]-1,t[0])):new Date(t[0],t[1]-1,t[2])},_showPrompt:function(i,r,u,f,e,o){i.data("jqv-prompt-at")instanceof jQuery?i=i.data("jqv-prompt-at"):i.data("jqv-prompt-at")&&(i=n(i.data("jqv-prompt-at")));var s=t._getPrompt(i);o&&(s=!1);n.trim(r)&&(s?t._updatePrompt(i,s,r,u,f,e):t._buildPrompt(i,r,u,f,e))},_buildPrompt:function(i,r,u,f,e){var o=n("<div>"),v,h,c,l,a,s;o.addClass(t._getClassName(i.attr("id"))+"formError");o.addClass("parentForm"+t._getClassName(i.closest("form, .validationEngineContainer").attr("id")));o.addClass("formError");switch(u){case"pass":o.addClass("greenPopup");break;case"load":o.addClass("blackPopup")}if(f&&o.addClass("ajaxed"),v=n("<div>").addClass("formErrorContent").html(r).appendTo(o),h=i.data("promptPosition")||e.promptPosition,e.showArrow){c=n("<div>").addClass("formErrorArrow");typeof h=="string"&&(s=h.indexOf(":"),s!=-1&&(h=h.substring(0,s)));switch(h){case"bottomLeft":case"bottomRight":o.find(".formErrorContent").before(c);c.addClass("formErrorArrowBottom").html('<div class="line1"><!-- --><\/div><div class="line2"><!-- --><\/div><div class="line3"><!-- --><\/div><div class="line4"><!-- --><\/div><div class="line5"><!-- --><\/div><div class="line6"><!-- --><\/div><div class="line7"><!-- --><\/div><div class="line8"><!-- --><\/div><div class="line9"><!-- --><\/div><div class="line10"><!-- --><\/div>');break;case"topLeft":case"topRight":c.html('<div class="line10"><!-- --><\/div><div class="line9"><!-- --><\/div><div class="line8"><!-- --><\/div><div class="line7"><!-- --><\/div><div class="line6"><!-- --><\/div><div class="line5"><!-- --><\/div><div class="line4"><!-- --><\/div><div class="line3"><!-- --><\/div><div class="line2"><!-- --><\/div><div class="line1"><!-- --><\/div>');o.append(c)}}return e.addPromptClass&&o.addClass(e.addPromptClass),l=i.attr("data-required-class"),l!==undefined?o.addClass(l):e.prettySelect&&n("#"+i.attr("id")).next().is("select")&&(a=n("#"+i.attr("id").substr(e.usePrefix.length).substring(e.useSuffix.length)).attr("data-required-class"),a!==undefined&&o.addClass(a)),o.css({opacity:0}),h==="inline"?(o.addClass("inline"),typeof i.attr("data-prompt-target")!="undefined"&&n("#"+i.attr("data-prompt-target")).length>0?o.appendTo(n("#"+i.attr("data-prompt-target"))):i.after(o)):i.before(o),s=t._calculatePosition(i,o,e),n("body").hasClass("rtl")?o.css({position:h==="inline"?"relative":"absolute",top:s.callerTopPosition,left:"initial",right:s.callerleftPosition,marginTop:s.marginTopSize,opacity:0}).data("callerField",i):o.css({position:h==="inline"?"relative":"absolute",top:s.callerTopPosition,left:s.callerleftPosition,right:"initial",marginTop:s.marginTopSize,opacity:0}).data("callerField",i),e.autoHidePrompt&&setTimeout(function(){o.animate({opacity:0},function(){o.closest(".formError").remove()})},e.autoHideDelay),o.animate({opacity:.87})},_updatePrompt:function(i,r,u,f,e,o,s){var h,c;r&&(typeof f!="undefined"&&(f=="pass"?r.addClass("greenPopup"):r.removeClass("greenPopup"),f=="load"?r.addClass("blackPopup"):r.removeClass("blackPopup")),e?r.addClass("ajaxed"):r.removeClass("ajaxed"),r.find(".formErrorContent").html(u),h=t._calculatePosition(i,r,o),c=n("body").hasClass("rtl")?{top:h.callerTopPosition,left:"initial",right:h.callerleftPosition,marginTop:h.marginTopSize,opacity:.87}:{top:h.callerTopPosition,left:h.callerleftPosition,right:"initial",marginTop:h.marginTopSize,opacity:.87},r.css({opacity:0,display:"block"}),s?r.css(c):r.animate(c))},_closePrompt:function(n){var i=t._getPrompt(n);i&&i.fadeTo("fast",0,function(){i.closest(".formError").remove()})},closePrompt:function(n){return t._closePrompt(n)},_getPrompt:function(i){var u=n(i).closest("form, .validationEngineContainer").attr("id"),f=t._getClassName(i.attr("id"))+"formError",r=n("."+t._escapeExpression(f)+".parentForm"+t._getClassName(u))[0];if(r)return n(r)},_escapeExpression:function(n){return n.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(t){var i=n(document),r=n("body"),u=t&&t.hasClass("rtl")||t&&(t.attr("dir")||"").toLowerCase()==="rtl"||i.hasClass("rtl")||(i.attr("dir")||"").toLowerCase()==="rtl"||r.hasClass("rtl")||(r.attr("dir")||"").toLowerCase()==="rtl";return Boolean(u)},_calculatePosition:function(n,t,i){var r,u,o,l=n.width(),s=n.position().left,h=n.position().top,p=n.height(),y=t.height();r=u=0;o=-y;var e=n.data("promptPosition")||i.promptPosition,f="",a="",v=0,c=0;typeof e=="string"&&e.indexOf(":")!=-1&&(f=e.substring(e.indexOf(":")+1),e=e.substring(0,e.indexOf(":")),f.indexOf(",")!=-1&&(a=f.substring(f.indexOf(",")+1),f=f.substring(0,f.indexOf(",")),c=parseInt(a),isNaN(c)&&(c=0)),v=parseInt(f),isNaN(f)&&(f=0));switch(e){default:case"topRight":u+=s+l-27;r+=h;break;case"topLeft":r+=h;u+=s;break;case"centerRight":r=h+4;o=0;u=s+n.outerWidth(!0)+5;break;case"centerLeft":u=s-(t.width()+2);r=h+4;o=0;break;case"bottomLeft":r=h+n.height()+5;o=0;u=s;break;case"bottomRight":u=s+l-27;r=h+n.height()+5;o=0;break;case"inline":u=0;r=0;o=0}return u+=v,r+=c,{callerTopPosition:r+"px",callerleftPosition:u+"px",marginTopSize:o+"px"}},_saveOptions:function(t,i){var u,r;return n.validationEngineLanguage?u=n.validationEngineLanguage.allRules:n.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page"),n.validationEngine.defaults.allrules=u,r=n.extend(!0,{},n.validationEngine.defaults,i),t.data("jqv",r),r},_getClassName:function(n){if(n)return n.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(n){return n.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(n,i,r,u){for(var e,f=r+1;f<i.length;f++)if(e=jQuery("#"+i[f]).first(),e.length&&t._required(e,["required"],0,u,!0)==undefined)return t._required(n,["required"],0,u)},_submitButtonClick:function(){var t=n(this),i=t.closest("form, .validationEngineContainer");i.data("jqv_submitButton",t.attr("id"))}};n.fn.validationEngine=function(i){var r=n(this);if(!r[0])return r;if(typeof i=="string"&&i.charAt(0)!="_"&&t[i])return i!="showPrompt"&&i!="hide"&&i!="hideAll"&&t.init.apply(r),t[i].apply(r,Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)n.error("Method "+i+" does not exist in jQuery.validationEngine");else return t.init.apply(r,arguments),t.attach.apply(r)};n.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,showPrompts:!0,validateNonVisibleFields:!1,ignoreFieldsWithClass:"ignoreMe",promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:n.noop,onBeforeAjaxFormValidation:n.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,notEmpty:!1,showArrow:!0,showArrowOnRadioAndCheckbox:!1,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onSuccess:!1,onFailure:!1,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:!1,autoHideDelay:1e4,fadeDuration:300,prettySelect:!1,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:!1}};n(function(){n.validationEngine.defaults.promptPosition=t.isRTL()?"topLeft":"topRight"})})(jQuery);